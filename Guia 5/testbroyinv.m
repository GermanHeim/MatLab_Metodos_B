F=@(X) [X(1)*X(2) - 1/2*X(2)^2; -2*X(1)*X(2) + X(2)^2 + X(1)^2 - 2];
x0=[1, 2]';
J=@(X) [X(2), X(1)-X(2); 2*X(1)-2*X(2), 2*X(2)-2*X(1)];

broyden_inv(F, J, x0, 0, 5)